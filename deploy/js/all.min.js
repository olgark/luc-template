var MenubarItem=function(e,t){this.menu=t,this.domNode=e,this.popupMenu=!1,this.hasFocus=!1,this.hasHover=!1,this.isMenubarItem=!0,this.keyCode=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40})};MenubarItem.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.domNode.addEventListener("mouseover",this.handleMouseover.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseout.bind(this));var e=this.domNode.nextElementSibling;e&&"UL"===e.tagName&&(this.popupMenu=new PopupMenu(e,this),this.popupMenu.init())},MenubarItem.prototype.handleKeydown=function(e){e.currentTarget;var t,s=e.key,o=!1;switch(e.keyCode){case this.keyCode.SPACE:case this.keyCode.RETURN:case this.keyCode.DOWN:this.popupMenu&&(this.popupMenu.open(),this.popupMenu.setFocusToFirstItem(),o=!0);break;case this.keyCode.LEFT:this.menu.setFocusToPreviousItem(this),o=!0;break;case this.keyCode.RIGHT:this.menu.setFocusToNextItem(this),o=!0;break;case this.keyCode.UP:this.popupMenu&&(this.popupMenu.open(),this.popupMenu.setFocusToLastItem(),o=!0);break;case this.keyCode.HOME:case this.keyCode.PAGEUP:this.menu.setFocusToFirstItem(),o=!0;break;case this.keyCode.END:case this.keyCode.PAGEDOWN:this.menu.setFocusToLastItem(),o=!0;break;case this.keyCode.TAB:case this.keyCode.ESC:this.popupMenu.close(!0);break;default:1===(t=s).length&&t.match(/\S/)&&(this.menu.setFocusByFirstCharacter(this,s),o=!0)}o&&(e.stopPropagation(),e.preventDefault())},MenubarItem.prototype.setExpanded=function(e){e?this.domNode.setAttribute("aria-expanded","true"):this.domNode.setAttribute("aria-expanded","false")},MenubarItem.prototype.handleFocus=function(e){this.menu.hasFocus=!0},MenubarItem.prototype.handleBlur=function(e){this.menu.hasFocus=!1},MenubarItem.prototype.handleMouseover=function(e){this.hasHover=!0,this.popupMenu.open()},MenubarItem.prototype.handleMouseout=function(e){this.hasHover=!1,setTimeout(this.popupMenu.close.bind(this.popupMenu,!1),300)};var Menubar=function(t){var s="Menubar constructor argument menubarNode ";if(!t instanceof Element)throw new TypeError(s+"is not a DOM Element.");if(0===t.childElementCount)throw new Error(s+"has no element children.");for(e=t.firstElementChild;e;){var o=e.firstElementChild;if(e&&o&&"A"!==o.tagName)throw new Error(s+"has child elements are not A elements.");e=e.nextElementSibling}this.isMenubar=!0,this.domNode=t,this.menubarItems=[],this.firstChars=[],this.firstItem=null,this.lastItem=null,this.hasFocus=!1,this.hasHover=!1};Menubar.prototype.init=function(){var e,t,s;for(elem=this.domNode.firstElementChild;elem;){var o=elem.firstElementChild;elem&&o&&"A"===o.tagName&&((e=new MenubarItem(o,this)).init(),this.menubarItems.push(e),t=o.textContent.trim(),this.firstChars.push(t.substring(0,1).toLowerCase())),elem=elem.nextElementSibling}0<(s=this.menubarItems.length)&&(this.firstItem=this.menubarItems[0],this.lastItem=this.menubarItems[s-1]),this.firstItem.domNode.tabIndex=0},Menubar.prototype.setFocusToItem=function(e){for(var t=!1,s=0;s<this.menubarItems.length;s++){var o=this.menubarItems[s];0==o.domNode.tabIndex&&(t="true"===o.domNode.getAttribute("aria-expanded")),o.domNode.tabIndex=-1,o.popupMenu&&o.popupMenu.close()}e.domNode.focus(),e.domNode.tabIndex=0,t&&e.popupMenu&&e.popupMenu.open()},Menubar.prototype.setFocusToFirstItem=function(e){this.setFocusToItem(this.firstItem)},Menubar.prototype.setFocusToLastItem=function(e){this.setFocusToItem(this.lastItem)},Menubar.prototype.setFocusToPreviousItem=function(e){var t;e===this.firstItem?newItem=this.lastItem:(t=this.menubarItems.indexOf(e),newItem=this.menubarItems[t-1]),this.setFocusToItem(newItem)},Menubar.prototype.setFocusToNextItem=function(e){var t;e===this.lastItem?newItem=this.firstItem:(t=this.menubarItems.indexOf(e),newItem=this.menubarItems[t+1]),this.setFocusToItem(newItem)},Menubar.prototype.setFocusByFirstCharacter=function(e,t){var s,o;t=t.toLowerCase(),e.domNode.getAttribute("aria-expanded");(s=this.menubarItems.indexOf(e)+1)===this.menubarItems.length&&(s=0),-1===(o=this.getIndexFirstChars(s,t))&&(o=this.getIndexFirstChars(0,t)),-1<o&&this.setFocusToItem(this.menubarItems[o])},Menubar.prototype.getIndexFirstChars=function(e,t){for(var s=e;s<this.firstChars.length;s++)if(t===this.firstChars[s])return s;return-1};var MenuItem=function(e,t){"object"!=typeof popupObj&&(popupObj=!1),this.domNode=e,this.menu=t,this.popupMenu=!1,this.isMenubarItem=!1,this.keyCode=Object.freeze({TAB:9,RETURN:13,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40})};MenuItem.prototype.init=function(){this.domNode.tabIndex=-1,this.domNode.addEventListener("keydown",this.handleKeydown.bind(this)),this.domNode.addEventListener("click",this.handleClick.bind(this)),this.domNode.addEventListener("focus",this.handleFocus.bind(this)),this.domNode.addEventListener("blur",this.handleBlur.bind(this)),this.domNode.addEventListener("mouseover",this.handleMouseover.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseout.bind(this));var e=this.domNode.nextElementSibling;e&&"UL"===e.tagName&&(this.popupMenu=new PopupMenu(e,this),this.popupMenu.init())},MenuItem.prototype.isExpanded=function(){return"true"===this.domNode.getAttribute("aria-expanded")},MenuItem.prototype.handleKeydown=function(e){var t,s,o=e.currentTarget,n=e.key,i=!1;switch(e.keyCode){case this.keyCode.SPACE:case this.keyCode.RETURN:if(this.popupMenu)this.popupMenu.open(),this.popupMenu.setFocusToFirstItem();else{try{t=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(e){document.createEvent&&(t=document.createEvent("MouseEvents")).initEvent("click",!0,!0)}o.dispatchEvent(t)}i=!0;break;case this.keyCode.UP:this.menu.setFocusToPreviousItem(this),i=!0;break;case this.keyCode.DOWN:this.menu.setFocusToNextItem(this),i=!0;break;case this.keyCode.LEFT:this.menu.setFocusToController("previous",!0),this.menu.close(!0),i=!0;break;case this.keyCode.RIGHT:this.popupMenu?(this.popupMenu.open(),this.popupMenu.setFocusToFirstItem()):(this.menu.setFocusToController("next",!0),this.menu.close(!0)),i=!0;break;case this.keyCode.HOME:case this.keyCode.PAGEUP:this.menu.setFocusToFirstItem(),i=!0;break;case this.keyCode.END:case this.keyCode.PAGEDOWN:this.menu.setFocusToLastItem(),i=!0;break;case this.keyCode.ESC:this.menu.setFocusToController(),this.menu.close(!0),i=!0;break;case this.keyCode.TAB:this.menu.setFocusToController();break;default:1===(s=n).length&&s.match(/\S/)&&(this.menu.setFocusByFirstCharacter(this,n),i=!0)}i&&(e.stopPropagation(),e.preventDefault())},MenuItem.prototype.setExpanded=function(e){e?this.domNode.setAttribute("aria-expanded","true"):this.domNode.setAttribute("aria-expanded","false")},MenuItem.prototype.handleClick=function(e){this.menu.setFocusToController(),this.menu.close(!0)},MenuItem.prototype.handleFocus=function(e){this.menu.hasFocus=!0},MenuItem.prototype.handleBlur=function(e){this.menu.hasFocus=!1,setTimeout(this.menu.close.bind(this.menu,!1),300)},MenuItem.prototype.handleMouseover=function(e){this.menu.hasHover=!0,this.menu.open(),this.popupMenu&&(this.popupMenu.hasHover=!0,this.popupMenu.open())},MenuItem.prototype.handleMouseout=function(e){this.popupMenu&&(this.popupMenu.hasHover=!1,this.popupMenu.close(!0)),this.menu.hasHover=!1,setTimeout(this.menu.close.bind(this.menu,!1),300)};var PopupMenu=function(e,t){var s="PopupMenu constructor argument domNode ";if(!e instanceof Element)throw new TypeError(s+"is not a DOM Element.");if(0===e.childElementCount)throw new Error(s+"has no element children.");for(var o=e.firstElementChild;o;){var n=o.firstElementChild;if(n&&"A"===n)throw new Error(s+"has descendant elements that are not A elements.");o=o.nextElementSibling}this.isMenubar=!1,this.domNode=e,this.controller=t,this.menuitems=[],this.firstChars=[],this.firstItem=null,this.lastItem=null,this.hasFocus=!1,this.hasHover=!1};PopupMenu.prototype.init=function(){var e,t,s,o,n;for(this.domNode.addEventListener("mouseover",this.handleMouseover.bind(this)),this.domNode.addEventListener("mouseout",this.handleMouseout.bind(this)),e=this.domNode.firstElementChild;e;)(t=e.firstElementChild)&&"A"===t.tagName&&((s=new MenuItem(t,this)).init(),this.menuitems.push(s),o=t.textContent.trim(),this.firstChars.push(o.substring(0,1).toLowerCase())),e=e.nextElementSibling;0<(n=this.menuitems.length)&&(this.firstItem=this.menuitems[0],this.lastItem=this.menuitems[n-1])},PopupMenu.prototype.handleMouseover=function(e){this.hasHover=!0},PopupMenu.prototype.handleMouseout=function(e){this.hasHover=!1,setTimeout(this.close.bind(this,!1),1)},PopupMenu.prototype.setFocusToController=function(e,t){if("string"!=typeof e&&(e=""),""!==e){if(this.controller.isMenubarItem)"previous"===e?this.controller.menu.setFocusToPreviousItem(this.controller,t):"next"===e&&this.controller.menu.setFocusToNextItem(this.controller,t);else if(this.controller.domNode.focus(),this.close(),"next"===e){var s=function(e,t){for(;e;){if(e.isMenubarItem)return e.domNode.focus(),e;t&&e.menu.close(!0),e.hasFocus=!1,e=e.menu.controller}return!1}(this.controller,!1);s&&s.menu.setFocusToNextItem(s,t)}}else this.controller&&this.controller.domNode&&this.controller.domNode.focus()},PopupMenu.prototype.setFocusToFirstItem=function(){this.firstItem.domNode.focus()},PopupMenu.prototype.setFocusToLastItem=function(){this.lastItem.domNode.focus()},PopupMenu.prototype.setFocusToPreviousItem=function(e){var t;e===this.firstItem?this.lastItem.domNode.focus():(t=this.menuitems.indexOf(e),this.menuitems[t-1].domNode.focus())},PopupMenu.prototype.setFocusToNextItem=function(e){var t;e===this.lastItem?this.firstItem.domNode.focus():(t=this.menuitems.indexOf(e),this.menuitems[t+1].domNode.focus())},PopupMenu.prototype.setFocusByFirstCharacter=function(e,t){var s,o;t=t.toLowerCase();(s=this.menuitems.indexOf(e)+1)===this.menuitems.length&&(s=0),-1===(o=this.getIndexFirstChars(s,t))&&(o=this.getIndexFirstChars(0,t)),-1<o&&this.menuitems[o].domNode.focus()},PopupMenu.prototype.getIndexFirstChars=function(e,t){for(var s=e;s<this.firstChars.length;s++)if(t===this.firstChars[s])return s;return-1},PopupMenu.prototype.open=function(){var e=this.controller.domNode.getBoundingClientRect();this.controller.isMenubarItem?(this.domNode.style.display="block",this.domNode.style.position="absolute",this.domNode.style.top=e.height-1+"px"):(this.domNode.parentNode.style.position="relative",this.domNode.style.display="block",this.domNode.style.position="absolute",this.domNode.style.left=e.width+"px"),this.domNode.style.zIndex=100,this.controller.setExpanded(!0)},PopupMenu.prototype.close=function(e){for(var t=this.controller.hasHover,s=this.hasFocus,o=0;o<this.menuitems.length;o++){var n=this.menuitems[o];n.popupMenu&&(s|=n.popupMenu.hasFocus)}this.controller.isMenubarItem||(t=!1),!e&&(s||this.hasHover||t)||(this.domNode.style.display="none",this.domNode.style.zIndex=0,this.controller.setExpanded(!1))},$(document).ready(function(){$(".nav").setup_navigation(),$("body").addClass("js");var t=$("#menu"),s=$(".menu-link"),e=$(".has-subnav > a");s.click(function(e){e.preventDefault(),s.toggleClass("active"),t.toggleClass("active")}),e.click(function(e){e.preventDefault(),$(this).toggleClass("active").next("ul").toggleClass("active")})});var keyCodeMap={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};function openSearch(){document.getElementById("search-overlay").style.display="block"}function closeSearch(){document.getElementById("search-overlay").style.display="none"}$.fn.setup_navigation=function(s){s=jQuery.extend({menuHoverClass:"show-menu"},s),$(this).attr("role","menubar").find("li").attr("role","menuitem");var e=$(this).find("> li > a");$(e).next("ul").attr("data-test","true").attr({"aria-hidden":"true",role:"menu"}).find("a").attr("tabIndex",-1),$(e).each(function(){0<$(this).next("ul").length&&$(this).parent("li").attr("aria-haspopup","true")}),$(e).hover(function(){$(this).closest("ul").attr("aria-hidden","false").find("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1),$(this).next("ul").attr("aria-hidden","false").addClass(s.menuHoverClass).find("a").attr("tabIndex",0)}),$(e).focus(function(){$(this).closest("ul").find("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1),$(this).next("ul").attr("aria-hidden","false").addClass(s.menuHoverClass).find("a").attr("tabIndex",0)}),$(e).keydown(function(e){37==e.keyCode?(e.preventDefault(),0==$(this).parent("li").prev("li").length?$(this).parents("ul").find("> li").last().find("a").first().focus():$(this).parent("li").prev("li").find("a").first().focus()):38==e.keyCode?(e.preventDefault(),0<$(this).parent("li").find("ul").length&&$(this).parent("li").find("ul").attr("aria-hidden","false").addClass(s.menuHoverClass).find("a").attr("tabIndex",0).last().focus()):39==e.keyCode?(e.preventDefault(),0==$(this).parent("li").next("li").length?$(this).parents("ul").find("> li").first().find("a").first().focus():$(this).parent("li").next("li").find("a").first().focus()):40==e.keyCode?(e.preventDefault(),0<$(this).parent("li").find("ul").length&&$(this).parent("li").find("ul").attr("aria-hidden","false").addClass(s.menuHoverClass).find("a").attr("tabIndex",0).first().focus()):13==e.keyCode||32==e.keyCode?(e.preventDefault(),$(this).parent("li").find("ul[aria-hidden=true]").attr("aria-hidden","false").addClass(s.menuHoverClass).find("a").attr("tabIndex",0).first().focus()):27==e.keyCode?(e.preventDefault(),$("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1)):$(this).parent("li").find("ul[aria-hidden=false] a").each(function(){if($(this).text().substring(0,1).toLowerCase()==keyCodeMap[e.keyCode])return $(this).focus(),!1})});var t=$(e).parent("li").find("ul").find("a");$(t).keydown(function(e){if(38==e.keyCode)e.preventDefault(),0==$(this).parent("li").prev("li").length?$(this).parents("ul").parents("li").find("a").first().focus():$(this).parent("li").prev("li").find("a").first().focus();else if(40==e.keyCode)e.preventDefault(),0==$(this).parent("li").next("li").length?$(this).parents("ul").parents("li").find("a").first().focus():$(this).parent("li").next("li").find("a").first().focus();else if(27==e.keyCode||37==e.keyCode)e.preventDefault(),$(this).parents("ul").first().prev("a").focus().parents("ul").first().find("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1);else if(32==e.keyCode)e.preventDefault(),window.location=$(this).attr("href");else{var t=!1;$(this).parent("li").nextAll("li").find("a").each(function(){if($(this).text().substring(0,1).toLowerCase()==keyCodeMap[e.keyCode])return $(this).focus(),!(t=!0)}),t||$(this).parent("li").prevAll("li").find("a").each(function(){if($(this).text().substring(0,1).toLowerCase()==keyCodeMap[e.keyCode])return $(this).focus(),!1})}}),$(this).find("a").last().keydown(function(e){9==e.keyCode&&$("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1)}),$(document).click(function(){$("."+s.menuHoverClass).attr("aria-hidden","true").removeClass(s.menuHoverClass).find("a").attr("tabIndex",-1)}),$(this).click(function(e){e.stopPropagation()})},$(document).keyup(function(e){27==e.which&&$(".overlay").fadeOut(300)});